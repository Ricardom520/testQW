{"version":3,"sources":["webpack://ReactMicroTs/./src/pages/Backlog/index.less?3052","pages/Backlog/index.less","pages/Backlog/index.tsx"],"names":["api","content","__esModule","default","module","i","options","exports","locals","___CSS_LOADER_EXPORT___","push","CheckboxItem","Checkbox","tabs","title","key","tabStatus","label","value","Backlog","props","history","useState","addDealtVisible","setAddDealtVisible","getStartTime","Date","startTime","setStartTime","getEndTime","endTime","setEndTime","completeStatus","setCompleteStatus","backlogList","setBacklogList","getBacklogList","useCallback","a","fetchTodoList","userId","sessionStorage","getItem","undefined","toFixed","res","code","list","data","sort","p","n","complete_status","useEffect","className","styles","onClick","go","type","initialPage","onChange","tab","timeLineTitle","src","calendar","alt","map","b","dealtCardItem","style","background","padding","fetchComplete","id","then","right","line1","color","msg","line2","clock","moment","todo_time","format","line3","selected","visible","onCancel","onOk"],"mappings":"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","file":"static/js/8.e118b2d8.chunk.js","sourcesContent":["var api = require(\"!../../../node_modules/_style-loader@1.3.0@style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/_css-loader@4.3.0@css-loader/dist/cjs.js??ref--5-oneOf-0-1!../../../node_modules/_less-loader@7.1.0@less-loader/dist/cjs.js!./index.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/_css-loader@4.3.0@css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".backlog-tab-9a867 {\\n  background-color: #fff;\\n}\\n.backlog-tab-9a867 .am-tabs-default-bar-top {\\n  padding-left: 40px;\\n}\\n.backlog-tab-9a867 .am-tabs-default-bar-content {\\n  width: 50%;\\n}\\n.backlog-tab-addicon-15667 {\\n  position: absolute;\\n  top: 10px;\\n  right: 15px;\\n  color: #108ee9;\\n  z-index: 99;\\n}\\n.backlog-tab-backicon-7abc3 {\\n  position: absolute;\\n  top: 10px;\\n  left: 10px;\\n  color: #108ee9;\\n  z-index: 99;\\n}\\n.backlog-tab-cont-f8f26 {\\n  padding-top: 10px;\\n}\\n.backlog-tab-cont-detail-47973 {\\n  padding: 20px;\\n}\\n.backlog-tab-cont-detail-47973 .timeLineTitle-2aebb {\\n  display: flex;\\n  align-items: center;\\n  border-bottom: 1px solid #FAFAFA;\\n  padding-bottom: 5px;\\n}\\n.backlog-tab-cont-detail-47973 .timeLineTitle-2aebb img {\\n  margin-right: 5px;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 {\\n  display: flex;\\n  margin-top: 10px;\\n  padding: 10px;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .am-list-item {\\n  align-items: flex-start;\\n  background-color: transparent;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .am-list-item.am-list-item {\\n  padding-left: 0;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .am-list-item.am-list-item .am-list-thumb {\\n  padding-right: 0;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .am-list-item.am-list-item .am-list-thumb .am-checkbox-inner {\\n  border-radius: 0;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .am-list-item.am-list-item .am-list-thumb .am-checkbox-checked .am-checkbox-inner {\\n  border: 1px solid #ccc;\\n  background: none;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .right-62040 {\\n  width: 100%;\\n  margin-left: 5px;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .right-62040 p {\\n  margin: 0;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .right-62040 .line1-f847d {\\n  color: #000;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .right-62040 .line2-93c88 {\\n  display: flex;\\n  align-items: center;\\n  margin: 3px 0;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .right-62040 .line2-93c88 img {\\n  margin-right: 5px;\\n}\\n.backlog-tab-9a867 .dealtCardItem-32f43 .right-62040 .line3-f425d {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/pages/Backlog/index.less\"],\"names\":[],\"mappings\":\"AAAA;EACE,sBAAA;AACF;AAFA;EAIM,kBAAA;AACN;AALA;EAOM,UAAA;AACN;AAEE;EACE,kBAAA;EACA,SAAA;EACA,WAAA;EACA,cAAA;EACA,WAAA;AAAJ;AAEE;EACE,kBAAA;EACA,SAAA;EACA,UAAA;EACA,cAAA;EACA,WAAA;AAAJ;AAEE;EACE,iBAAA;AAAJ;AACI;EACE,aAAA;AACN;AAFI;EAGI,aAAA;EACA,mBAAA;EACA,gCAAA;EACA,mBAAA;AAER;AARI;EAQM,iBAAA;AAGV;AArCA;EAwCI,aAAA;EACA,gBAAA;EACA,aAAA;AAAJ;AA1CA;EA6CQ,uBAAA;EACA,6BAAA;AAAR;AACQ;EACE,eAAA;AACV;AAFQ;EAGI,gBAAA;AAEZ;AALQ;EAKM,gBAAA;AAGd;AARQ;EASQ,sBAAA;EACA,gBAAA;AAEhB;AA3DA;EAiEM,WAAA;EACA,gBAAA;AAHN;AA/DA;EAoEQ,SAAA;AAFR;AAlEA;EAuEQ,WAAA;AAFR;AArEA;EA0EQ,aAAA;EACA,mBAAA;EACA,aAAA;AAFR;AA1EA;EA8EU,iBAAA;AADV;AA7EA;EAkFQ,aAAA;EACA,8BAAA;AAFR\",\"sourcesContent\":[\".backlog-tab {\\n  background-color: #fff;\\n  :global {\\n    .am-tabs-default-bar-top {\\n      padding-left: 40px;\\n    }\\n    .am-tabs-default-bar-content {\\n      width: 50%;\\n    }\\n  }\\n  &-addicon {\\n    position: absolute;\\n    top: 10px;\\n    right: 15px;\\n    color: #108ee9;\\n    z-index: 99;\\n  }\\n  &-backicon {\\n    position: absolute;\\n    top: 10px;\\n    left: 10px;\\n    color: #108ee9;\\n    z-index: 99;\\n  }\\n  &-cont {\\n    padding-top: 10px;\\n    &-detail {\\n      padding: 20px;\\n      .timeLineTitle {\\n        display: flex;\\n        align-items: center;\\n        border-bottom: 1px solid #FAFAFA;\\n        padding-bottom: 5px;\\n        img {\\n          margin-right: 5px;\\n        }\\n      }\\n    }\\n  }\\n  .dealtCardItem {\\n    display: flex;\\n    margin-top: 10px;\\n    padding: 10px;\\n    :global {\\n      .am-list-item {\\n        align-items: flex-start;\\n        background-color: transparent;\\n        &.am-list-item {\\n          padding-left: 0;\\n          .am-list-thumb {\\n            padding-right: 0;\\n            .am-checkbox-inner {\\n              border-radius: 0;\\n            }\\n            .am-checkbox-checked {\\n              .am-checkbox-inner {\\n                border: 1px solid #ccc;\\n                background: none;\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n    .right {\\n      width: 100%;\\n      margin-left: 5px;\\n      p {\\n        margin: 0;\\n      }\\n      .line1 {\\n        color: #000;\\n      }\\n      .line2 {\\n        display: flex;\\n        align-items: center;\\n        margin: 3px 0;\\n        img {\\n          margin-right: 5px;\\n        }\\n      }\\n      .line3 {\\n        display: flex;\\n        justify-content: space-between;\\n      }\\n    }\\n  }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"backlog-tab\": \"backlog-tab-9a867\",\n\t\"backlog-tab-addicon\": \"backlog-tab-addicon-15667\",\n\t\"backlog-tab-backicon\": \"backlog-tab-backicon-7abc3\",\n\t\"backlog-tab-cont\": \"backlog-tab-cont-f8f26\",\n\t\"backlog-tab-cont-detail\": \"backlog-tab-cont-detail-47973\",\n\t\"timeLineTitle\": \"timeLineTitle-2aebb\",\n\t\"dealtCardItem\": \"dealtCardItem-32f43\",\n\t\"right\": \"right-62040\",\n\t\"line1\": \"line1-f847d\",\n\t\"line2\": \"line2-93c88\",\n\t\"line3\": \"line3-f425d\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { Checkbox, Icon, Tabs, Tag } from 'antd-mobile';\n\nimport styles from './index.less';\nimport AddDealt from '../Index/components/AddDealt';\nimport TabBtn from '../Index/components/TabBtn';\nimport calendar from '../../assets/icons/calendar.svg';\nimport clock from '../../assets/icons/clock.svg';\nimport { fetchComplete, fetchTodoList } from '../../services/detail';\nimport { getEndTime, getStartTime } from '../../utils/func';\nimport moment from 'moment';\n\nconst CheckboxItem = Checkbox.CheckboxItem;\n\nconst tabs = [\n  { title: '今日待办', key: 'today' },\n  { title: '全部待办', key: 'all' },\n];\n\nconst tabStatus = [\n  {\n    label: '全部',\n    value: -1,\n  },\n  {\n    label: '未完成',\n    value: 0\n  },\n  {\n    label: '已完成',\n    value: 1\n  }\n]\n\ninterface IProps {\n  history: any;\n}\n\nconst Backlog: React.FC<IProps> = (props) => {\n  const { history } = props;\n  const [addDealtVisible, setAddDealtVisible] = useState<boolean>(false);\n  const [startTime, setStartTime] = useState<number>(getStartTime(new Date()));\n  const [endTime, setEndTime] = useState<number>(getEndTime(new Date()));\n  const [completeStatus, setCompleteStatus] = useState<number>(-1);\n  const [backlogList, setBacklogList] = useState([]);\n\n  const getBacklogList = useCallback(async () => {\n    const res: any = await fetchTodoList({\n      userId: sessionStorage.getItem('userId'),\n      completeStatus,\n      startTime: startTime ? startTime / 1000 : undefined,\n      endTime: endTime ? +(endTime / 1000).toFixed(0) : undefined,\n    });\n    if (res.code === 200) {\n      const list = res?.data?.sort((p, n) => {\n        return p.complete_status - n.complete_status\n      })\n      setBacklogList(list);\n    }\n  }, [startTime, endTime, completeStatus])\n\n  useEffect(() => {\n    getBacklogList();\n  }, [getBacklogList]);\n\n  // 切换tab\n  const onTabsChange = (tab) => {\n    if (tab.key === 'all') {\n      setStartTime(0)\n      setEndTime(0)\n    } else {\n      setStartTime(getStartTime(new Date()))\n      setEndTime(getEndTime(new Date()))\n    }\n  }\n\n  const handleClick = (value: number) => {\n    setCompleteStatus(value);\n  }\n\n  const handleSubmit = (data: any) => {\n    fetchComplete({\n      id: data.id,\n      completeStatus: data.complete_status ? 0 : 1\n    }).then((res: any) => {\n      if (res.code === 200) {\n        getBacklogList();\n      }\n    })\n  }\n\n  return (\n    <div className={styles['backlog-tab']}>\n      <div\n        className={styles['backlog-tab-backicon']}\n        onClick={() => history.go(-1)}\n      > <Icon type='left' /> </div>\n      <Tabs\n        tabs={tabs}\n        initialPage={'today'}\n        onChange={onTabsChange}\n      >\n        <div className={styles['backlog-tab-cont']}>\n          <TabBtn options={tabStatus} onChange={handleClick} />\n          <div className={styles['backlog-tab-cont-detail']}>\n            <div className={styles.timeLineTitle}>\n              <img src={calendar} alt=\"日期\" /> 2020/11/17 &nbsp;&nbsp;星期一\n            </div>\n            {\n              backlogList.map(b => (\n                <div key={b.id} className={styles.dealtCardItem} style={b.complete_status === 1 ? { background: '#F5F5F5', padding: '10px' } : {}}>\n                  <CheckboxItem onChange={() => handleSubmit(b)} />\n                  <div className={styles.right}>\n                    <p className={styles.line1} style={b.complete_status === 1 ? { color: '#666' } : {}} >{b.msg}</p>\n                    <p className={styles.line2}>\n                      <img src={clock} alt=\"time\" /> {moment(b.todo_time * 1000).format('HH:mm') || '--'}\n                    </p>\n                    <div className={styles.line3}>\n                      <div>344</div>\n                      <div><Tag selected>聊一聊</Tag></div>\n                    </div>\n                  </div>\n                </div>\n              ))\n            }\n          </div>\n        </div>\n      </Tabs>\n      <div\n        className={styles['backlog-tab-addicon']}\n        onClick={() => setAddDealtVisible(true)}\n      >+ 添加待办</div>\n      <AddDealt\n        visible={addDealtVisible}\n        onCancel={() => setAddDealtVisible(false)}\n        onOk={() => getBacklogList()}\n      />\n    </div>\n  )\n}\nexport default Backlog;"],"sourceRoot":""}