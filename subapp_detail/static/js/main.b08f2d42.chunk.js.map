{"version":3,"sources":["../webpack/universalModuleDefinition","utils/func.ts","shared/actions.ts","public-path.js","models/global.ts","pages/Index/model.ts","routes/index.tsx","index.tsx","utils/request.ts","services/detail.ts"],"names":["root","factory","exports","module","define","amd","this","SetCookie","key","value","Cookies","set","GetCookie","get","EncryptDes","message","keyHex","cryptoJs","enc","Utf8","parse","DES","encrypt","mode","ECB","padding","pad","Pkcs7","toString","DecryptDes","decrypt","getQueryValue","queryName","search","vars","decodeURI","substring","split","i","length","pair","getStartTime","time","Date","setHours","getEndTime","isMobile","test","navigator","userAgent","emptyAction","console","warn","actions","onGlobalStateChange","setGlobalState","GlobalState","window","__POWERED_BY_QIANKUN__","__webpack_public_path__","__INJECTED_PUBLIC_PATH_BY_QIANKUN__","GlobalModel","namespace","state","unionid","externaluserid","reducers","saveExternalData","action","payload","UserModel","userData","undefined","dataOverview","department","name","role","userid","effects","fetchExternalData","call","put","Toast","loading","fetchCustomerInfo","resp","code","data","train","id","type","hide","fetchDataOverview","fetchHealth","log","fetchUserDeparment","saveDataOverview","saveUserDeparment","menuGlobal","path","component","RouterConfig","history","app","Router","Switch","map","index","Route","exact","dynamic","Redirect","to","location","require","createHashHistory","App","dva","render","start","bootstrap","a","mount","props","setShareConfig","title","desc","link","imgUrl","origin","success","cancel","setActions","unmount","ReactDOM","unmountComponentAtNode","document","getElementById","model","default","router","routeConfig","service","axios","create","baseURL","timeout","withCredentials","interceptors","request","use","req","error","Promise","reject","response","res","params","method","fetchFollowCustomer","fetchTodoList","fetchTodoAdd","fetchComplete","fetchUpdatePlanProInfo","fetchTrainProLogin","fetchUpdateInfo","fetchCheckAdd","fetchAddSchedule","fetchGetCustomerChatEventList","userId","fetchUpdateHealthRemark"],"mappings":"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","file":"static/js/main.b08f2d42.chunk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactMicroTs\"] = factory();\n\telse\n\t\troot[\"ReactMicroTs\"] = factory();\n})(this, function() {\nreturn ","import cryptoJs from 'crypto-js';\r\nimport Cookies from 'js-cookie';\r\n\r\n// 存cookie\r\nexport const SetCookie = (key, value) => {\r\n  Cookies.set(key, value)\r\n}\r\n\r\n// 取cookie\r\nexport const GetCookie = (key) => {\r\n  return Cookies.get(key)\r\n}\r\n\r\n// DES 对称加密\r\nexport const EncryptDes = (message) => {\r\n  var keyHex = cryptoJs.enc.Utf8.parse('pulan-go');\r\n  var encrypted = cryptoJs.DES.encrypt(message, keyHex, {\r\n    mode: cryptoJs.mode.ECB,\r\n    padding: cryptoJs.pad.Pkcs7\r\n  });\r\n\r\n  return encrypted.toString();\r\n}\r\n\r\n// DES 对称解密\r\nexport const DecryptDes = (message) => {\r\n  var keyHex = cryptoJs.enc.Utf8.parse('pulan-go');\r\n  \r\n  if (message) {\r\n    var decrypted = cryptoJs.DES.decrypt(message, keyHex, {\r\n      mode: cryptoJs.mode.ECB,\r\n      padding: cryptoJs.pad.Pkcs7\r\n    });\r\n  \r\n    return decrypted.toString(cryptoJs.enc.Utf8);\r\n  }\r\n\r\n  return '';\r\n}\r\n\r\n/**\r\n * [通过参数名获取url中的参数值]\r\n * 示例URL:http://htmlJsTest/getrequest.html?uid=admin&rid=1&fid=2&name=小明\r\n * @param  {[string]} queryName [参数名]\r\n * @return {[string]}           [参数值]\r\n */\r\nexport const getQueryValue = (queryName, search) => {\r\n  const query = decodeURI(search.substring(1));\r\n  const vars = query.split(\"&\");\r\n  for (let i = 0; i < vars.length; i++) {\r\n    const pair = vars[i].split(\"=\");\r\n    if (pair[0] === queryName) { return pair[1]; }\r\n  }\r\n  return null;\r\n}\r\n\r\n// time为某一天的时间戳\r\nexport const getStartTime = (time) => {\r\n  const nowTimeDate = new Date(time)\r\n  return nowTimeDate.setHours(0, 0, 0, 0)\r\n}\r\n\r\n// 获取任意一天的结束时间\r\nexport const getEndTime = (time) => {\r\n  const nowTimeDate = new Date(time)\r\n  return nowTimeDate.setHours(23, 59, 59, 999)\r\n}\r\n\r\n// 判断PC端还是移动端\r\nexport const isMobile = () => {\r\n  if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {\r\n    return true;\r\n  }\r\n  return false;\r\n}","function emptyAction(...params) {\r\n  console.warn(\"Current excute action is empty!\");\r\n}\r\n\r\nclass Actions {\r\n  // 默认值为Action\r\n  actions = {\r\n    onGlobalStateChange: emptyAction,\r\n    setGlobalState: emptyAction,\r\n    GlobalState: emptyAction,\r\n  };\r\n\r\n  /**\r\n   * 设置actions\r\n   */\r\n  setActions(actions) {\r\n    this.actions  = actions;\r\n  }\r\n\r\n  /**\r\n   * 映射\r\n   */\r\n  onGlobalStateChange(...args) {\r\n    return this.actions.onGlobalStateChange(...args);\r\n  }\r\n\r\n  /**\r\n   * 映射\r\n   */\r\n  setGlobalState(...args) {\r\n    return this.actions.setGlobalState(...args);\r\n  }\r\n}\r\n\r\nconst actions = new Actions();\r\n\r\nexport default actions;","if (window.__POWERED_BY_QIANKUN__) {\n  // 动态设置 webpack publicPath，防止资源加载出错\n  // eslint-disable-next-line no-undef\n  __webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__\n}\n","import { Reducer, Effect } from './connect';\r\n\r\nexport interface GlobalState {\r\n  externaluserid: string;\r\n  unionid: string;\r\n}\r\n\r\nexport interface GlobalModelType {\r\n  namespace: string;\r\n  state: GlobalState,\r\n  reducers: {\r\n    saveExternalData: Reducer;\r\n  },\r\n}\r\n\r\nconst GlobalModel: GlobalModelType = {\r\n  namespace: 'global',\r\n  state: {\r\n    unionid: '',\r\n    externaluserid: '',\r\n  },\r\n  reducers: {\r\n    saveExternalData(state, action) {\r\n      const { payload } = action;\r\n\r\n      return {\r\n        ...state,\r\n        unionid: payload.unionid,\r\n        externaluserid: payload.externaluserid,\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default GlobalModel;","import { Toast } from 'antd-mobile';\r\nimport { Reducer, Effect } from '../../models/connect';\r\nimport { fetchCustomerInfo, fetchDataOverview, fetchHealth, fetchUserDeparment } from '../../services/detail';\r\nimport { SetCookie, EncryptDes } from '../../utils/func';\r\n\r\nexport interface DepartmentState {\r\n  department: string;\r\n  name: string;\r\n  role: string;\r\n  userid: string;\r\n}\r\n\r\nexport interface UserState {\r\n  userData: any;\r\n  dataOverview: any;\r\n  department: DepartmentState;\r\n}\r\n\r\nexport interface UserModelType {\r\n  namespace: string;\r\n  state: UserState,\r\n  effects: {\r\n    fetchExternalData: Effect;\r\n    fetchDataOverview: Effect;\r\n    fetchHealth: Effect;\r\n    fetchUserDeparment: Effect;\r\n  },\r\n  reducers: {\r\n    saveExternalData: Reducer;\r\n    saveDataOverview: Reducer;\r\n    saveUserDeparment: Reducer;\r\n  },\r\n}\r\n\r\nconst UserModel: UserModelType = {\r\n  namespace: 'user',\r\n  state: {\r\n    userData: undefined,\r\n    dataOverview: undefined,\r\n    department: {\r\n      department: '',\r\n      name: '',\r\n      role: '',\r\n      userid: '',\r\n    }\r\n  },\r\n  effects: {\r\n    *fetchExternalData({ payload }, { call, put }) {\r\n      Toast.loading('加载中...')\r\n\r\n      const resp: any = yield call(fetchCustomerInfo, payload);\r\n      \r\n      if (resp.code === 200 && resp.data) {\r\n        SetCookie('tid', EncryptDes(resp?.data?.train?.id))\r\n\r\n        yield put({\r\n          type: 'user/saveExternalData',\r\n          payload: {\r\n            unionid: payload.unionid,\r\n            externaluserid: payload.externaluserid,\r\n            userData: resp.data\r\n          }\r\n        })\r\n      } else {\r\n        yield put({\r\n          type: 'user/saveExternalData',\r\n          payload: {\r\n            unionid: payload.unionid,\r\n            externaluserid: payload.externaluserid,\r\n            userData: []\r\n          }\r\n        })\r\n      }\r\n      Toast.hide();\r\n    },\r\n    *fetchDataOverview({ payload }, { call, put }) {\r\n      const resp: any = yield call(fetchDataOverview, payload);\r\n\r\n      if (resp.code === 200 && resp.data) {\r\n        yield put({\r\n          type: 'user/saveDataOverview',\r\n          payload: {\r\n            dataOverview: resp.data\r\n          }\r\n        })\r\n      }\r\n    },\r\n    *fetchHealth({ payload }, { call }) {\r\n      const resp: any = yield call(fetchHealth, payload);\r\n      console.log(resp)\r\n      if (resp.code === 200 && resp.data) {\r\n        return resp.data\r\n      }\r\n    },\r\n    *fetchUserDeparment({ payload }, { call, put }) {\r\n      const resp: any = yield call(fetchUserDeparment, payload);\r\n\r\n      if (resp.code === 200 && resp.data) {\r\n        yield put({\r\n          type: 'user/saveUserDeparment',\r\n          payload: resp.data\r\n        })\r\n      }\r\n      console.log(resp)\r\n    }\r\n  },\r\n  reducers: {\r\n    saveExternalData(state, action) {\r\n      const { payload } = action;\r\n\r\n      return {\r\n        ...state,\r\n        unionid: payload.unionid,\r\n        externaluserid: payload.externaluserid,\r\n        userData: payload.userData\r\n      }\r\n    },\r\n    saveDataOverview(state, action) {\r\n      const { payload } = action;\r\n\r\n      return {\r\n        ...state,\r\n        dataOverview: payload.dataOverview,\r\n      }\r\n    },\r\n    saveUserDeparment(state, action) {\r\n      const { payload } = action;\r\n\r\n      return {\r\n        ...state,\r\n        department: payload\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default UserModel;","import React from 'react';\nimport { Router, Route, Switch, Redirect } from 'react-router-dom';\nimport dynamic from 'dva/dynamic';\n\nconst menuGlobal = [\n  {\n    id: 1,\n    name: 'Index',\n    path: '/',\n    component: () => import(\"../pages/Index\"),\n  },\n  {\n    id: 2,\n    name: 'followUp',\n    path: '/followUp',\n    component: () => import(\"../pages/FollowUp\"),\n  },\n  {\n    id: 3,\n    name: 'backlog',\n    path: '/backlog',\n    component: () => import(\"../pages/Backlog\"),\n  }\n]\n\nconst RouterConfig = ({ history, app }: any) =>\n  <Router history={history}>\n    <Switch>\n      {menuGlobal.map(({ path, component }, index) => {\n        // console.log(dynamics)\n        return (\n          <Route\n            key={index}\n            path={path}\n            exact\n            component={(dynamic as any)({ app, component })}\n          />\n        )\n      })}\n      <Redirect to=\"/\" />\n    </Switch>\n  </Router>\n\nexport default RouterConfig;","import ReactDOM from 'react-dom'\nimport dva from 'dva'\n\nimport routeConfig from './routes'\nimport actions from './shared/actions'\nimport './public-path'\nimport './index.css'\nimport 'antd-mobile/dist/antd-mobile.css'\n// import App from './App';\n\nconst history = require('history').createHashHistory\nconst location = history()\n\nconst App = dva({\n  history: location,\n})\n\nApp.model(require('./models/global.ts').default)\nApp.model(require('./pages/Index/model.ts').default)\n\nApp.router(routeConfig)\n\n/**\n * 渲染函数\n * 两种情况：主应用生命周期钩子中运行 / 微应用单独启动时运行\n */\nfunction render() {\n  // ReactDOM.render(\n  //   <React.StrictMode>\n  //     <App />\n  //   </React.StrictMode>,\n  //   document.getElementById('root')\n  // );\n  App.start('#root')\n}\n\n// 独立运行时，直接挂载应用\nif (!window.__POWERED_BY_QIANKUN__) {\n  render()\n}\n\n/**\n * bootstrap 只会在微应用初始化的时候调用一次，下次微应用重新进入时会直接调用 mount 钩子，不会再重复触发 bootstrap。\n * 通常我们可以在这里做一些全局变量的初始化，比如不会在 unmount 阶段被销毁的应用级别的缓存等。\n */\nexport async function bootstrap() {\n  console.log('ReactMicroApp bootstraped')\n}\n\n/**\n * 应用每次进入都会调用 mount 方法，通常我们在这里触发应用的渲染方法\n */\nexport async function mount(props: any) {\n  props.setShareConfig({\n    title: '客户详情', // 分享标题\n    desc: '点击查看客户详情', // 分享描述\n    link: `xxx`, // 分享链接\n    imgUrl: window.location.origin + '/plan_tmp_img.png', // 分享图标\n    success: function () {\n      // 用户确认分享后执行的回调函数\n    },\n    cancel: function () {\n      // 用户取消分享后执行的回调函数\n    },\n  })\n\n  actions.setActions(props)\n  await render()\n}\n\n/**\n * 应用每次 切出/卸载 会调用的方法，通常在这里我们会卸载微应用的应用实例\n */\nexport async function unmount() {\n  console.log('ReactMicroApp unmount')\n  ReactDOM.unmountComponentAtNode(document.getElementById('root'))\n}\n","import axios from 'axios';\r\n\r\nconst service = axios.create({\r\n  baseURL: process.env.NODE_ENV === 'development' ? 'https://wxtest.planplus.cn' : '',\r\n  timeout: 40000,\r\n  withCredentials: false,\r\n})\r\n\r\n// 设置请求拦截器\r\nservice.interceptors.request.use(req=>{\r\n  return req\r\n}, function (error) {\r\n  return Promise.reject(error);\r\n})\r\n\r\n// 设置响应拦截器\r\nservice.interceptors.response.use(res=>{\r\n  return res.data;\r\n}, function (error) {\r\n  return Promise.reject(error);\r\n})\r\n\r\nexport default service;","import request from '../utils/request';\r\n\r\n/**\r\n * 客户基础资料\r\n * @params unionid 客户unionid externaluserid 客户userid userId 理财师userId\r\n */\r\nexport async function fetchCustomerInfo(params) {\r\n  console.log(params)\r\n  return request(`/v1/customerInfo/detail`, {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 数据概况\r\n * @params unionid 客户unionid externaluserid 客户userid phone 理财师userId\r\n */\r\nexport async function fetchDataOverview(params) {\r\n  console.log(params)\r\n  return request(`/v1/customerInfo/overview`, {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 客户跟进保存\r\n */\r\nexport async function fetchFollowCustomer(params) {\r\n  return request(`/v1/customerInfo/followCustomer`, {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 待办列表\r\n * @params userId 理财师id completeStatus 完成状态\r\n */\r\nexport async function fetchTodoList(params) {\r\n  return request(`/v1/todo/list`, {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 新增待办事项\r\n */\r\nexport async function fetchTodoAdd(params) {\r\n  return request('/v1/todo/add', {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 完成待办事项\r\n */\r\nexport async function fetchComplete(params) {\r\n  return request('/v1/todo/complete', {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 健康问卷\r\n */\r\nexport async function fetchHealth(params) {\r\n  return request('/v1/customerInfo/health', {\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 获取打call导师的日志记录\r\n */\r\nexport async function fetchCallList(params) {\r\n  return request('/v1/customerInfo/callList', {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 更新有效期与存钱字段\r\n */\r\nexport async function fetchUpdatePlanProInfo(params) {\r\n  return request('/v1/customerInfo/updatePlanProInfo', {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 组长请求\r\n */\r\nexport async function fetchCallCaptain(params) {\r\n  return request('/v1/customerInfo/callCaptain', {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 理财师所在部门\r\n */\r\nexport async function fetchUserDeparment(params) {\r\n  return request(`/v1/customerInfo/userDeparment`, {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 打开PC页面\r\n */\r\nexport async function fetchTrainProLogin(params) {\r\n  return request(`v1/customerInfo/trainProLogin`, {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 更新中奖状态和收货地址\r\n */\r\nexport async function fetchUpdateInfo(params) {\r\n  return request('/v1/customerInfo/updateInfo', {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 日程检查\r\n */\r\nexport async function fetchCheckAdd(params) {\r\n  return request('/v1/todo/checkAdd', {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 新增企微日程\r\n */\r\nexport async function fetchAddSchedule(params) {\r\n  return request('/v1/todo/addSchedule', {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 获取单个用户参加活动信息\r\n */\r\nexport async function fetchGetCustomerChatEventList(userId: string) {\r\n  return request(`/v1/chatEvent/getCustomerChatEventList?userId=${userId}`)\r\n}\r\n\r\n/**\r\n * 更新健康问卷\r\n */\r\nexport async function fetchUpdateHealthRemark(params) {\r\n  return request('/v1/customerInfo/updateHealthRemark', {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}\r\n\r\n/**\r\n * 更新客户参加活动数据\r\n */\r\nexport async function fetchModifyCustomerData(params) {\r\n  return request('/v1/chatEvent/modifyCustomerData', {\r\n    method: 'POST',\r\n    data: params\r\n  })\r\n}"],"sourceRoot":""}